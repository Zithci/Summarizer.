<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUMMARIZE.</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen p-4 font-sans">
    <div class="max-w-xl w-full bg-black p-6 md:p-8 rounded-none border border-white shadow-[0_0_15px_rgba(255,255,255,0.1)]">
        <h1 class="text-3xl font-bold mb-8 text-white font-mono tracking-tighter italic">SUMMARIZE.</h1>
        
        <div class="space-y-5">
            <input type="text" id="title" placeholder="TOPIC (OPTIONAL)" 
                class="w-full p-4 rounded-none bg-black border-b border-white outline-none focus:border-white transition-all text-white placeholder:text-gray-600 text-base">
            
            <select id="category" class="w-full p-4 rounded-none bg-black border border-white outline-none cursor-pointer text-white appearance-none text-base">
                <option value="Web3">WEB3</option>
                <option value="Wisdom">WISDOM</option>
            </select>

            <textarea id="content" rows="8" placeholder="PASTE KNOWLEDGE HERE..." 
                class="w-full p-4 rounded-none bg-black border border-white outline-none focus:border-white transition-all resize-none text-white placeholder:text-gray-600 text-base"></textarea>

            <button onclick="send()" id="btn" class="w-full py-5 bg-white hover:bg-gray-200 text-black font-black uppercase tracking-widest transition-all active:scale-[0.97] text-lg">
                Send to Notion
            </button>
        </div>
        <p id="status" class="mt-6 text-center text-[10px] font-mono uppercase tracking-widest h-4"></p>
    </div>

    <script>
        async function send() {
            const btn = document.getElementById('btn');
            const status = document.getElementById('status');
            const payload = {
                title: document.getElementById('title').value,
                content: document.getElementById('content').value,
                category: document.getElementById('category').value
            };

            if (!payload.content) return;

            btn.disabled = true;
            status.innerText = "PROCESSING...";
            
            try {
                // PASTIKAN GANTI LOCALHOST KE IP LAPTOP LO DI SINI
                const res = await fetch('http://192.168.118.117:8000/summarize', { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
                });


                if (res.ok) {
                    status.innerText = "LOGGED TO NOTION.";
                    document.getElementById('content').value = "";
                    document.getElementById('title').value = "";
                }
            } catch (e) {
                status.innerText = "FAILED TO CONNECT.";
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>